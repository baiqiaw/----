# 开发阶段启动清单

## 版本信息

| 版本号 | 编制日期 | 修订说明 | 编制人 |
| ---- | ----------- | ---- | ----- |
| V1.0 | 2025 年 11 月 | 初始版本 | 技术负责人 |

## 1. 启动前检查

### 1.1 设计文档完整性检查

✅ **已完成的核心设计文档**（28份）：

- ✅ 需求规格说明书（SRS）
- ✅ 系统概要设计文档（HLD）
- ✅ 技术选型方案文档
- ✅ 所有模块详细设计文档（DDD）- 10个核心模块
- ✅ 所有API接口详细设计文档 - 6个核心接口
- ✅ 数据库设计文档
- ✅ 认证授权机制设计文档
- ✅ 开发规范文档
- ✅ 测试计划文档
- ✅ 开发环境搭建指南
- ✅ 部署文档模板
- ✅ 项目文档总结
- ✅ 项目启动指南
- ✅ 项目进度报告

### 1.2 技术选型确认

✅ **已确定的技术栈**：

- **后端**：Node.js 20 LTS + TypeScript + Fastify
- **数据库**：
  - SQLite 3（开发环境 + 个人版桌面客户端）
  - PostgreSQL 14+（企业版 Web 服务/生产环境）
- **缓存/队列**：Redis 7+ / BullMQ（企业版）
- **ORM**：Prisma
- **转换引擎**：LibreOffice / Poppler / Sharp / Pandoc / pdf2docx
- **OCR引擎**：PaddleOCR（个人版）/ 百度OCR（企业版）
- **AI服务**：百度文心
- **前端**：React 18 + TypeScript + Vite 5
- **桌面客户端**：Electron 28+ + React 18 + TypeScript（个人版，使用 SQLite）

### 1.3 开发环境准备

⏳ **待完成的环境搭建任务**：

- [ ] T073：代码仓库搭建（1人天）
- [ ] T074：CI/CD流水线搭建（3人天）
- [ ] T075：开发工具配置（1人天）
- [ ] T076：测试环境搭建（2人天）

---

## 2. 开发阶段第一阶段：基础设施搭建

### 2.1 项目结构初始化

**目标**：创建完整的项目目录结构

**任务清单**：

- [ ] 创建后端项目结构（backend/）
  - [ ] 初始化 Node.js + TypeScript 项目
  - [ ] 配置 Fastify 框架
  - [ ] 配置 Prisma ORM
  - [ ] 配置 ESLint + Prettier
  - [ ] 配置 Jest 测试框架
  - [ ] 创建基础目录结构（api/, services/, models/, utils/, middleware/）

- [ ] 创建前端项目结构（web/）
  - [ ] 初始化 React + TypeScript + Vite 项目
  - [ ] 配置 Ant Design / Ant Design Pro
  - [ ] 配置 Zustand 状态管理
  - [ ] 配置 React Router v6
  - [ ] 配置 ESLint + Prettier
  - [ ] 创建基础目录结构（components/, pages/, stores/, utils/, hooks/）

- [ ] 创建桌面客户端项目结构（desktop/）
  - [ ] 初始化 Electron + React + TypeScript 项目
  - [ ] 配置 Electron 主进程和渲染进程
  - [ ] 配置打包工具（electron-builder）
  - [ ] 配置 SQLite 数据库（个人版使用本地 SQLite 文件）
  - [ ] 配置数据库文件存储路径（用户数据目录）
  - [ ] 创建基础目录结构

- [ ] 创建共享代码库（packages/）
  - [ ] 创建 TypeScript 类型定义包
  - [ ] 创建工具函数包
  - [ ] 创建 API 客户端包

### 2.2 数据库初始化

**目标**：初始化数据库并创建基础表结构

**说明**：

- **开发环境**：使用 SQLite 数据库，简化开发环境配置
- **个人版（桌面客户端）**：使用 SQLite 数据库，无需额外数据库服务
- **企业版（Web 服务/生产环境）**：使用 PostgreSQL 数据库，提供更好的性能和功能支持

**任务清单**：

- [ ] 配置 SQLite 数据库（开发环境 + 个人版）
  - [ ] 配置 Prisma 使用 SQLite（datasource）
  - [ ] 注意：SQLite 不支持 ENUM 类型，需使用 VARCHAR + CHECK 约束或字典表
  - [ ] 注意：SQLite 不支持部分 PostgreSQL 特性，需做兼容性处理
  - [ ] 个人版桌面客户端：配置本地 SQLite 数据库文件存储路径
- [ ] 创建数据库迁移脚本（基于数据库设计文档）
  - [ ] 适配 SQLite 语法（如：VARCHAR 长度限制、JSONB 使用 TEXT + JSON 函数）
  - [ ] 处理 ENUM 类型（使用 VARCHAR + CHECK 约束）
  - [ ] 确保迁移脚本同时支持 SQLite 和 PostgreSQL（使用 Prisma 的数据库适配器）
- [ ] 初始化字典表数据
- [ ] 创建基础表结构（users, files, conversion_tasks, batch_tasks, history, system_config）
- [ ] 创建索引（SQLite 索引语法）
- [ ] 编写数据库初始化脚本
- [ ] 测试数据库连接和查询（SQLite）
- [ ] 准备企业版 PostgreSQL 迁移脚本（用于企业版部署）

### 2.3 基础框架搭建

**目标**：搭建后端和前端的基础框架

**任务清单**：

- [ ] 后端基础框架
  - [ ] 配置 Fastify 服务器
  - [ ] 配置 CORS、Body Parser、静态文件服务
  - [ ] 配置错误处理中间件
  - [ ] 配置日志系统（Winston / Pino）
  - [ ] 配置环境变量管理（dotenv）
  - [ ] 创建 API 路由基础结构
  - [ ] 配置 Swagger/OpenAPI 文档

- [ ] 前端基础框架
  - [ ] 配置 Vite 开发服务器
  - [ ] 配置路由系统
  - [ ] 配置状态管理
  - [ ] 配置 API 请求封装（Axios）
  - [ ] 配置错误处理和提示
  - [ ] 创建基础布局组件
  - [ ] 配置国际化（i18n）

- [ ] 认证授权基础
  - [ ] 实现 JWT Token 生成和验证
  - [ ] 实现 API Key 验证
  - [ ] 实现用户认证中间件
  - [ ] 实现权限控制中间件（RBAC）

### 2.4 开发工具配置

**目标**：配置开发、测试、构建工具

**任务清单**：

- [ ] Git 配置
  - [ ] 配置 .gitignore
  - [ ] 配置分支策略（main, develop, feature/*, hotfix/*）
  - [ ] 配置 Git Hooks（pre-commit, commit-msg）
  - [ ] 配置 Conventional Commits

- [ ] 代码质量工具
  - [ ] 配置 ESLint 规则
  - [ ] 配置 Prettier 格式化规则
  - [ ] 配置 TypeScript 严格模式
  - [ ] 配置 Husky + lint-staged

- [ ] 测试工具配置
  - [ ] 配置 Jest 测试框架
  - [ ] 配置测试覆盖率工具
  - [ ] 配置 E2E 测试工具（Playwright）

- [ ] CI/CD 配置
  - [ ] 配置 GitHub Actions / GitLab CI
  - [ ] 配置自动化测试流程
  - [ ] 配置自动化构建流程
  - [ ] 配置 Docker 构建流程

---

## 3. 开发阶段第二阶段：核心功能开发

### 3.1 文件上传模块

**参考文档**：[文件上传模块详细设计](./../02-设计文档/详细设计文档（DDD）-文件上传模块.md)

**任务清单**：

- [ ] 实现文件上传处理器
- [ ] 实现文件验证器（格式、大小、完整性、安全）
- [ ] 实现存储管理器（本地存储 / 云存储适配器）
- [ ] 实现元数据管理器
- [ ] 实现下载管理器
- [ ] 实现清理管理器
- [ ] 实现单文件上传接口
- [ ] 实现批量文件上传接口
- [ ] 实现文件夹上传接口
- [ ] 编写单元测试
- [ ] 编写集成测试

### 3.2 格式转换核心引擎

**参考文档**：[格式转换核心引擎详细设计](./../02-设计文档/详细设计文档（DDD）-格式转换核心引擎.md)

**任务清单**：

- [ ] 实现格式识别器
- [ ] 实现转换路由器
- [ ] 实现引擎适配器（LibreOffice, Poppler, Pandoc, Sharp）
- [ ] 实现转换执行器
- [ ] 实现保真度控制器
- [ ] 实现质量验证器
- [ ] 实现单文件转换流程
- [ ] 实现批量转换流程
- [ ] 实现复杂转换流程（多步骤）
- [ ] 编写单元测试
- [ ] 编写集成测试

### 3.3 批量处理模块

**参考文档**：[批量处理模块详细设计](./../02-设计文档/详细设计文档（DDD）-批量处理模块.md)

**任务清单**：

- [ ] 配置 BullMQ + Redis
- [ ] 实现任务管理器
- [ ] 实现任务队列（优先级、延迟、重试）
- [ ] 实现任务调度器
- [ ] 实现任务执行器
- [ ] 实现进度监控器
- [ ] 实现结果聚合器
- [ ] 实现任务持久化
- [ ] 实现并发控制
- [ ] 实现实时进度推送
- [ ] 编写单元测试
- [ ] 编写集成测试

---

## 4. 开发阶段第三阶段：API接口开发

### 4.1 核心API接口

**参考文档**：[API接口详细设计](./../02-设计文档/)

**任务清单**：

- [ ] 实现单文件转换接口（POST /api/v1/convert）
- [ ] 实现批量转换接口（POST /api/v1/batch/convert）
- [ ] 实现任务状态查询接口（GET /api/v1/task/{task_id}）
- [ ] 实现系统状态监控接口（GET /api/v1/system/status）
- [ ] 实现文件上传接口（POST /api/v1/files/upload）
- [ ] 实现文件下载接口（GET /api/v1/files/{file_id}/download）
- [ ] 实现错误处理机制
- [ ] 实现 API 限流
- [ ] 编写 API 文档（Swagger/OpenAPI）
- [ ] 编写 API 测试用例

### 4.2 用户管理API

**参考文档**：[用户管理模块详细设计](./../02-设计文档/详细设计文档（DDD）-用户管理模块.md)

**任务清单**：

- [ ] 实现用户注册接口（POST /api/v1/auth/register）
- [ ] 实现用户登录接口（POST /api/v1/auth/login）
- [ ] 实现 Token 刷新接口（POST /api/v1/auth/refresh）
- [ ] 实现用户信息查询接口（GET /api/v1/users/me）
- [ ] 实现用户信息更新接口（PUT /api/v1/users/me）
- [ ] 实现密码修改接口（PUT /api/v1/users/me/password）
- [ ] 实现 API Key 管理接口
- [ ] 编写单元测试
- [ ] 编写集成测试

---

## 5. 开发阶段第四阶段：用户管理和历史记录

### 5.1 用户管理模块

**参考文档**：[用户管理模块详细设计](./../02-设计文档/详细设计文档（DDD）-用户管理模块.md)

**任务清单**：

- [ ] 实现用户注册功能
- [ ] 实现用户登录功能
- [ ] 实现密码管理（修改、重置）
- [ ] 实现角色管理（RBAC）
- [ ] 实现权限控制
- [ ] 实现安全措施（密码哈希、防暴力破解）
- [ ] 编写单元测试
- [ ] 编写集成测试

### 5.2 历史记录模块

**参考文档**：[历史记录模块详细设计](./../02-设计文档/详细设计文档（DDD）-历史记录模块.md)

**任务清单**：

- [ ] 实现历史记录创建
- [ ] 实现历史记录查询（分页、筛选、排序）
- [ ] 实现历史记录统计
- [ ] 实现自动清理机制
- [ ] 实现快速重新转换功能
- [ ] 优化查询性能（索引、缓存）
- [ ] 编写单元测试
- [ ] 编写集成测试

---

## 6. 开发阶段第五阶段：AI功能和前端开发

### 6.1 AI辅助功能模块

**参考文档**：[AI辅助功能模块详细设计](./../02-设计文档/详细设计文档（DDD）-AI辅助功能模块.md)

**任务清单**：

- [ ] 实现 AI 服务适配器（百度文心）
- [ ] 实现结构化提取功能
- [ ] 实现摘要生成功能
- [ ] 实现格式修复功能
- [ ] 实现智能推荐功能
- [ ] 实现降级方案
- [ ] 编写单元测试
- [ ] 编写集成测试

### 6.2 OCR识别模块

**参考文档**：[OCR识别模块详细设计](./../02-设计文档/详细设计文档（DDD）-OCR识别模块.md)

**任务清单**：

- [ ] 实现图像预处理器
- [ ] 实现 OCR 引擎适配器（PaddleOCR, 百度OCR）
- [ ] 实现文本识别器
- [ ] 实现后处理器
- [ ] 实现多语言支持
- [ ] 实现精度优化
- [ ] 编写单元测试
- [ ] 编写集成测试

### 6.3 前端界面开发

**任务清单**：

- [ ] 实现主界面（文件上传、格式选择、转换操作）
- [ ] 实现批量转换界面
- [ ] 实现历史记录界面
- [ ] 实现设置界面
- [ ] 实现错误提示界面
- [ ] 实现响应式布局
- [ ] 实现用户引导流程
- [ ] 实现文件预览功能
- [ ] 实现多语言支持
- [ ] 编写组件测试
- [ ] 编写 E2E 测试

---

## 7. 开发阶段第六阶段：缓存管理和错误处理

### 7.1 缓存管理模块

**参考文档**：[缓存管理模块详细设计](./../02-设计文档/详细设计文档（DDD）-缓存管理模块.md)

**任务清单**：

- [ ] 实现缓存管理器
- [ ] 实现临时文件管理器
- [ ] 实现清理调度器
- [ ] 实现存储管理器
- [ ] 实现删除策略管理器
- [ ] 实现缓存策略（LRU）
- [ ] 实现存储空间监控
- [ ] 编写单元测试
- [ ] 编写集成测试

### 7.2 错误处理机制

**参考文档**：[错误处理机制详细设计](./../02-设计文档/详细设计文档（DDD）-错误处理机制.md)

**任务清单**：

- [ ] 实现错误码管理器
- [ ] 实现异常捕获器
- [ ] 实现错误分类器
- [ ] 实现日志记录器
- [ ] 实现错误通知器
- [ ] 实现错误恢复机制
- [ ] 实现错误监控
- [ ] 编写单元测试

---

## 8. 测试阶段

### 8.1 单元测试

**参考文档**：[测试计划文档](./../05-测试文档/测试计划文档.md)

**任务清单**：

- [ ] 编写所有模块的单元测试
- [ ] 确保测试覆盖率 ≥ 80%
- [ ] 配置测试自动化流程
- [ ] 集成到 CI/CD 流程

### 8.2 集成测试

**任务清单**：

- [ ] 编写 API 集成测试
- [ ] 编写数据库集成测试
- [ ] 编写文件存储集成测试
- [ ] 编写转换引擎集成测试
- [ ] 编写 OCR 引擎集成测试

### 8.3 系统测试

**任务清单**：

- [ ] 编写端到端测试（E2E）
- [ ] 编写性能测试
- [ ] 编写安全测试
- [ ] 编写兼容性测试
- [ ] 编写压力测试

---

## 9. 部署准备

### 9.1 部署脚本

**参考文档**：[部署文档模板](./../06-部署文档/部署文档模板.md)

**任务清单**：

- [ ] 编写 Docker 配置文件
- [ ] 编写 Docker Compose 配置
- [ ] 编写数据库迁移脚本
- [ ] 编写环境配置脚本
- [ ] 编写启动脚本
- [ ] 编写停止脚本
- [ ] 编写备份脚本
- [ ] 编写恢复脚本

### 9.2 文档完善

**任务清单**：

- [ ] 完善 API 文档（Swagger/OpenAPI）
- [ ] 编写用户手册
- [ ] 编写运维手册
- [ ] 编写故障排查指南
- [ ] 编写升级指南

---

## 10. 开发规范检查清单

### 10.1 代码规范

- [ ] 所有代码符合 [开发规范文档](./../02-设计文档/开发规范文档.md)
- [ ] 所有代码通过 ESLint 检查
- [ ] 所有代码通过 Prettier 格式化
- [ ] 所有代码通过 TypeScript 类型检查
- [ ] 所有代码符合命名规范

### 10.2 Git 提交规范

- [ ] 所有提交符合 Conventional Commits 规范
- [ ] 所有提交信息清晰明确
- [ ] 所有提交关联到相关任务或 Issue

### 10.3 文档规范

- [ ] 所有公共 API 有完整的 JSDoc 注释
- [ ] 所有复杂逻辑有代码注释
- [ ] 所有模块有 README 说明
- [ ] 所有 API 接口有 Swagger 文档

---

## 11. 里程碑检查点

### M1 - 基础设施搭建完成

**检查标准**：

- [ ] 项目结构完整
- [ ] 数据库初始化完成
- [ ] 基础框架搭建完成
- [ ] 开发工具配置完成
- [ ] CI/CD 流程配置完成

### M2 - 核心功能开发完成

**检查标准**：

- [ ] 文件上传模块完成
- [ ] 格式转换核心引擎完成
- [ ] 批量处理模块完成
- [ ] 单元测试覆盖率 ≥ 80%

### M3 - API接口开发完成

**检查标准**：

- [ ] 所有核心 API 接口完成
- [ ] 用户管理 API 完成
- [ ] API 文档完整
- [ ] API 测试通过

### M4 - 用户管理和历史记录完成

**检查标准**：

- [ ] 用户管理模块完成
- [ ] 历史记录模块完成
- [ ] 权限控制完成
- [ ] 测试通过

### M5 - AI功能和前端完成

**检查标准**：

- [ ] AI 辅助功能完成
- [ ] OCR 识别模块完成
- [ ] 前端界面完成
- [ ] 多语言支持完成
- [ ] 测试通过

### M6 - 测试完成

**检查标准**：

- [ ] 单元测试完成
- [ ] 集成测试完成
- [ ] 系统测试完成
- [ ] 性能测试通过
- [ ] 安全测试通过

### M7 - 发布准备完成

**检查标准**：

- [ ] 部署脚本完成
- [ ] 文档完善
- [ ] 生产环境配置完成
- [ ] 备份恢复方案完成

---

## 12. 风险控制

### 12.1 技术风险

- [ ] 转换引擎兼容性问题 - 提前进行集成测试
- [ ] OCR 识别精度问题 - 提前进行精度测试
- [ ] 性能瓶颈问题 - 提前进行性能测试
- [ ] 第三方服务依赖问题 - 实现降级方案

### 12.2 进度风险

- [ ] 任务依赖关系复杂 - 提前识别关键路径
- [ ] 资源不足 - 提前规划资源
- [ ] 需求变更 - 严格控制变更流程

### 12.3 质量风险

- [ ] 测试覆盖率不足 - 设置最低覆盖率要求
- [ ] 代码质量问题 - 严格执行代码审查
- [ ] 文档不完整 - 文档与代码同步更新

---

## 13. 资源需求

### 13.1 人力资源

- **后端开发**：2-3人
- **前端开发**：2人
- **测试工程师**：1人
- **DevOps**：1人
- **产品/设计**：1人（UI/UX设计）

### 13.2 技术资源

- **开发服务器**：用于开发环境（使用 SQLite，无需单独数据库服务器）
- **测试服务器**：用于测试环境（可使用 SQLite 或 PostgreSQL）
- **个人版部署**：桌面客户端，使用 SQLite 本地数据库，无需服务器
- **企业版生产服务器**：用于企业版 Web 服务（PostgreSQL 14+）
- **CI/CD 服务器**：用于自动化构建和部署
- **第三方服务**：OCR服务、AI服务（需要API密钥）

**注意**：

- **开发环境和个人版**：使用 SQLite 可以简化环境配置，降低开发门槛，无需额外数据库服务
- **企业版生产环境**：建议使用 PostgreSQL 以获得更好的性能、并发处理能力和功能支持（如 JSONB、全文搜索等）

---

## 14. 下一步行动

### 立即行动（本周）

1. **完成开发环境搭建**（T073-T076）
   - 代码仓库搭建
   - CI/CD 流水线搭建
   - 开发工具配置
   - 测试环境搭建

2. **开始项目结构初始化**
   - 创建后端项目结构
   - 创建前端项目结构
   - 创建桌面客户端项目结构
   - 创建共享代码库

3. **开始数据库初始化**
   - 配置 SQLite 数据库（开发环境）
   - 创建数据库迁移脚本（适配 SQLite）
   - 初始化基础数据

### 近期计划（2周内）

1. **完成基础设施搭建**
   - 完成项目结构初始化
   - 完成数据库初始化
   - 完成基础框架搭建
   - 完成开发工具配置

2. **开始核心功能开发**
   - 开始文件上传模块开发
   - 开始格式转换核心引擎开发

---

## 15. 参考文档

### 设计文档

- [系统概要设计文档（HLD）](./../02-设计文档/系统概要设计文档（HLD）.md)
- [技术选型方案文档](./../02-设计文档/技术选型方案文档.md)
- [所有模块详细设计文档（DDD）](./../02-设计文档/)
- [所有API接口详细设计文档](./../02-设计文档/)
- [数据库设计文档](./../02-设计文档/数据库设计文档.md)
- [开发规范文档](./../02-设计文档/开发规范文档.md)

### 部署文档

- [开发环境搭建指南](./../06-部署文档/开发环境搭建指南.md)
- [部署文档模板](./../06-部署文档/部署文档模板.md)

### 项目管理文档

- [项目启动指南](./../项目启动指南.md)
- [项目进度报告](./项目进度报告.md)
- [易档转任务清单](./易档转任务清单.md)

---

## 更新记录

| 版本号 | 更新日期 | 更新内容 | 更新人 |
| ---- | ---- | ---- | ---- |
| V1.0 | 2025 年 11 月 | 初始版本 | 技术负责人 |
